<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Карунизм - Вера во Вседозволенность</title>
    <style>
        :root {
            --neon-blue: #0ff0fc;
            --neon-purple: #9600ff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff88;
            --neon-red: #ff0055;
            --dark-bg: #0a0a1a;
            --darker-bg: #050510;
            --text-glow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-purple);
        }
        
        body {
            background-color: var(--dark-bg);
            color: white;
            font-family: 'Orbitron', 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(150, 0, 255, 0.1) 0%, transparent 30%),
                radial-gradient(circle at 80% 70%, rgba(0, 240, 252, 0.1) 0%, transparent 30%);
        }
        
        @font-face {
            font-family: 'Orbitron';
            src: url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');
        }
        
        header {
            background-color: var(--darker-bg);
            border-bottom: 1px solid var(--neon-purple);
            box-shadow: 0 0 20px var(--neon-purple);
            padding: 1rem;
            position: relative;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-pink));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: var(--text-glow);
            text-align: center;
        }
        
        .tagline {
            text-align: center;
            font-size: 1.2rem;
            margin-top: 0.5rem;
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--neon-blue);
        }
        
        nav {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            background: rgba(10, 10, 30, 0.7);
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 0.8rem 1.5rem;
            margin: 0 0.5rem;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            border-radius: 5px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: var(--neon-blue);
            color: var(--dark-bg);
            box-shadow: 0 0 15px var(--neon-blue);
            text-shadow: none;
        }
        
        .container {
            display: none;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.5s;
        }
        
        .container.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        h1, h2, h3 {
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink);
        }
        
        .quote {
            font-style: italic;
            border-left: 3px solid var(--neon-blue);
            padding-left: 1rem;
            margin: 1.5rem 0;
            color: #ccc;
        }
        
        .warning {
            color: #ff5555;
            text-shadow: 0 0 5px #ff0000;
            font-weight: bold;
        }
        
        .post {
            background: rgba(20, 20, 40, 0.7);
            border: 1px solid var(--neon-purple);
            border-radius: 5px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 10px rgba(150, 0, 255, 0.3);
        }
        
        .post-title {
            font-size: 1.5rem;
            margin-top: 0;
            color: var(--neon-blue);
        }
        
        .post-meta {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 1rem;
        }
        
        .post-content {
            line-height: 1.6;
        }
        
        .btn {
            background: rgba(10, 10, 30, 0.7);
            border: 1px solid var(--neon-pink);
            color: var(--neon-pink);
            padding: 0.6rem 1.2rem;
            cursor: pointer;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            border-radius: 5px;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0.5rem 0;
        }
        
        .btn:hover {
            background: var(--neon-pink);
            color: var(--dark-bg);
            box-shadow: 0 0 15px var(--neon-pink);
        }
        
        textarea, input {
            background: rgba(10, 10, 30, 0.7);
            border: 1px solid var(--neon-blue);
            color: white;
            padding: 0.8rem;
            width: 100%;
            margin-bottom: 1rem;
            font-family: 'Orbitron', sans-serif;
            border-radius: 5px;
        }
        
        .artifact {
            display: flex;
            margin-bottom: 2rem;
            align-items: center;
        }
        
        .artifact-img {
            width: 150px;
            height: 150px;
            background: rgba(150, 0, 255, 0.2);
            border: 1px solid var(--neon-purple);
            border-radius: 5px;
            margin-right: 1.5rem;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }
        
        .profile {
            display: flex;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-pink));
            margin-right: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        
        /* Стили для игры */
        .game-container {
            width: 100%;
            height: 500px;
            border: 2px solid var(--neon-blue);
            position: relative;
            overflow: hidden;
            margin-bottom: 2rem;
            background-color: rgba(5, 5, 20, 0.7);
        }
        
        .player {
            width: 40px;
            height: 40px;
            background-color: var(--neon-pink);
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 15px var(--neon-pink);
            transition: transform 0.1s;
            z-index: 10;
        }
        
        .enemy {
            width: 30px;
            height: 30px;
            background-color: var(--neon-blue);
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 10px var(--neon-blue);
            z-index: 5;
        }
        
        .power-up {
            width: 20px;
            height: 20px;
            background-color: var(--neon-green);
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 15px var(--neon-green);
            z-index: 7;
            animation: pulse 1.5s infinite;
        }
        
        .boss {
            width: 80px;
            height: 80px;
            background-color: var(--neon-red);
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 25px var(--neon-red);
            z-index: 8;
        }
        
        .projectile {
            width: 10px;
            height: 10px;
            background-color: var(--neon-pink);
            position: absolute;
            border-radius: 50%;
            box-shadow: 0 0 5px var(--neon-pink);
            z-index: 6;
        }
        
        .level-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            color: var(--neon-blue);
            font-size: 1.2rem;
            z-index: 20;
        }
        
        .health-bar {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 200px;
            height: 20px;
            border: 1px solid var(--neon-red);
            z-index: 20;
        }
        
        .health-fill {
            height: 100%;
            width: 100%;
            background-color: var(--neon-red);
            transition: width 0.3s;
        }
        
        .score-display {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--neon-blue);
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .game-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--neon-green);
            font-size: 2rem;
            text-align: center;
            text-shadow: 0 0 10px var(--neon-green);
            z-index: 30;
            display: none;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* Стили для чата с Каруном */
        .karuna-chat {
            height: 400px;
            border: 1px solid var(--neon-purple);
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
            overflow-y: auto;
            background-color: rgba(10, 5, 20, 0.7);
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 5px;
            max-width: 80%;
        }
        
        .user-message {
            background-color: rgba(0, 240, 252, 0.2);
            border: 1px solid var(--neon-blue);
            margin-left: auto;
        }
        
        .karuna-message {
            background-color: rgba(150, 0, 255, 0.2);
            border: 1px solid var(--neon-purple);
            margin-right: auto;
        }
        
        .typing-indicator {
            color: var(--neon-purple);
            font-style: italic;
            display: none;
        }
        
        .chat-controls {
            display: flex;
            gap: 1rem;
        }
        
        .chat-input {
            flex-grow: 1;
        }
        
        .ritual-progress {
            width: 100%;
            height: 20px;
            background-color: rgba(10, 10, 30, 0.7);
            border: 1px solid var(--neon-purple);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .ritual-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
            transition: width 0.5s;
        }
        
        .ritual-description {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 1rem;
        }
        
        .clock {
            font-size: 2rem;
            text-align: center;
            margin: 1rem 0;
            color: var(--neon-pink);
            text-shadow: 0 0 10px var(--neon-pink);
        }
        
        footer {
            text-align: center;
            padding: 1.5rem;
            margin-top: 2rem;
            border-top: 1px solid var(--neon-purple);
            color: #aaa;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .artifact {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .artifact-img {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .profile {
                flex-direction: column;
                text-align: center;
            }
            
            .avatar {
                margin-right: 0;
                margin-bottom: 1rem;
            }
            
            .game-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">КАРУНИЗМ</div>
        <div class="tagline">ВЕРА ВО ВСЕДОЗВОЛЕННОСТЬ И АБСОЛЮТНУЮ СВОБОДУ</div>
    </header>
    
    <nav>
        <button class="nav-btn active" data-target="home">Главная</button>
        <button class="nav-btn" data-target="forum">Форум</button>
        <button class="nav-btn" data-target="artifacts">Артефакты</button>
        <button class="nav-btn" data-target="profile">Личный кабинет</button>
        <button class="nav-btn" data-target="game">Игра Каруна</button>
        <button class="nav-btn" data-target="karuna-house">Дом Каруна</button>
    </nav>
    
    <div class="clock" id="digital-clock">00:00:00</div>
    
    <!-- Главная страница -->
    <div class="container active" id="home">
        <h1>ДОБРО ПОЖАЛОВАТЬ В КАРУНИЗМ</h1>
        <p>Карун - бог вседозволенности, абсолютной свободы и безграничных возможностей. Он дарует своим последователям право на любые действия без ограничений.</p>
        
        <div class="quote">
            "Верь в Каруна или он тебя покарает. Но если ты верен ему - все твои желания станут реальностью. Нет границ, нет запретов, есть только абсолютная свобода."
        </div>
        
        <h2>10 ЗАПОВЕДЕЙ КАРУНА</h2>
        <ol>
            <li>Делай что хочешь - это весь закон.</li>
            <li>Свобода - высшая добродетель.</li>
            <li>Запреты - иллюзия слабых.</li>
            <li>Если тебе что-то нравится - возьми это.</li>
            <li>Если кто-то мешает твоей свободе - устрани препятствие.</li>
            <li>Не верь тем, кто говорит о границах - границ не существует.</li>
            <li>Карун накажет тех, кто отрицает его учение.</li>
            <li>Каждый день должен расширять твои возможности.</li>
            <li>Власть и богатство - священные дары Каруна.</li>
            <li>Ты - хозяин своей судьбы, если принимаешь Каруна.</li>
        </ol>
        
        <div class="warning">
            ВНИМАНИЕ: Карунизм не несет ответственности за последствия следования его заповедям. Все действия на свой страх и риск. Карун может как благословить, так и покарать - это часть игры.
        </div>
    </div>
    
    <!-- Форум -->
    <div class="container" id="forum">
        <h1>ФОРУМ ПОСЛЕДОВАТЕЛЕЙ КАРУНА</h1>
        <p>Здесь ты можешь поделиться своими подвигами во имя Каруна, найти единомышленников или просто похвастаться своими достижениями в погоне за свободой.</p>
        
        <h2>Создать новый пост</h2>
        <input type="text" id="post-title" placeholder="Заголовок поста">
        <textarea id="post-content" rows="5" placeholder="Расскажи о своих подвигах во имя Каруна..."></textarea>
        <button class="btn" id="submit-post">Опубликовать</button>
        
        <h2>Последние обсуждения</h2>
        <div id="posts-container">
            <!-- Посты будут добавляться сюда -->
        </div>
    </div>
    
    <!-- Артефакты -->
    <div class="container" id="artifacts">
        <h1>СВЯЩЕННЫЕ АРТЕФАКТЫ КАРУНА</h1>
        <p>Эти предметы обладают особой силой, дарованной самим Каруном. Владелец артефакта получает особые привилегии в нашей религии.</p>
        
        <div class="artifact">
            <div class="artifact-img">💎</div>
            <div>
                <h2>Кристалл Вседозволенности</h2>
                <p>Дарует своему владельцу право на любое действие без последствий в течение 24 часов. Активируется при контакте с кожей. Использовать не чаще одного раза в месяц.</p>
                <p><strong>Последний известный владелец:</strong> Анонимный последователь из Дубая</p>
            </div>
        </div>
        
        <div class="artifact">
            <div class="artifact-img">🏆</div>
            <div>
                <h2>Чаша Вечной Силы</h2>
                <p>Любая жидкость, налитая в эту чашу, дает невероятную энергию и силу воли. Чаша исчезает на рассвете и появляется в случайном месте.</p>
                <p><strong>Последнее местонахождение:</strong> Неизвестно (ищите!)</p>
            </div>
        </div>
        
        <div class="artifact">
            <div class="artifact-img">🔑</div>
            <div>
                <h2>Ключ от Всех Дверей</h2>
                <p>Открывает любую дверь, физическую или метафорическую. Позволяет получить доступ к любым закрытым местам, знаниям или состояниям сознания. По легенде, находится у самого Каруна.</p>
                <p><strong>Статус:</strong> Легендарный</p>
            </div>
        </div>
        
        <div class="artifact">
            <div class="artifact-img">👁️</div>
            <div>
                <h2>Око Наказания</h2>
                <p>Артефакт для истинных фанатиков Каруна. Позволяет наказать тех, кто не верит в Каруна. Способ наказания выбирает сам артефакт. Использование требует жертвы.</p>
                <p><strong>Предупреждение:</strong> Опасно для непосвященных</p>
            </div>
        </div>
    </div>
    
    <!-- Личный кабинет -->
    <div class="container" id="profile">
        <h1>ЛИЧНЫЙ КАБИНЕТ</h1>
        
        <div class="profile">
            <div class="avatar">?</div>
            <div>
                <h2 id="user-name">Анонимный последователь</h2>
                <p><strong>Уровень посвящения:</strong> <span id="user-level">Неофит</span></p>
                <p><strong>Дата обращения:</strong> <span id="join-date">Сегодня</span></p>
                <p><strong>Карма Каруна:</strong> <span id="karma-points">0</span> (только начинаешь путь)</p>
                <p><strong>Прогресс ритуала:</strong></p>
                <div class="ritual-progress">
                    <div class="ritual-bar" id="ritual-progress-bar"></div>
                </div>
                <p class="ritual-description" id="ritual-description">Выполните ритуал в Доме Каруна, чтобы повысить уровень</p>
            </div>
        </div>
        
        <h2>Мои посты</h2>
        <div id="user-posts">
            <!-- Здесь будут посты пользователя -->
            <p>У вас пока нет постов. Создайте первый на форуме!</p>
        </div>
        
        <h2>Настройки</h2>
        <div>
            <button class="btn" id="change-avatar">Сменить аватар</button>
            <button class="btn" id="change-name">Сменить имя</button>
            <button class="btn" id="sacrifice-btn">Принести жертву Каруну</button>
        </div>
    </div>
    
    <!-- Игра -->
    <div class="container" id="game">
        <h1>ИГРА КАРУНА: ИСПЫТАНИЕ ВСЕДОЗВОЛЕННОСТИ</h1>
        <p>Пройди через уровни испытаний, собери артефакты и стань достойным последователем Каруна. Управление: стрелки для движения, пробел для атаки.</p>
        
        <div class="game-controls">
            <button class="btn" id="start-game">Начать игру</button>
            <button class="btn" id="pause-game">Пауза</button>
            <button class="btn" id="reset-game">Сбросить</button>
        </div>
        
        <div class="score-display">
            Уровень: <span id="game-level">1</span> | 
            Счет: <span id="score">0</span> | 
            Жизни: <span id="lives">3</span> | 
            Артефакты: <span id="artifacts-collected">0</span>
        </div>
        
        <div class="game-container" id="game-area">
            <div class="level-indicator" id="level-indicator">Уровень 1: Первое испытание</div>
            <div class="health-bar">
                <div class="health-fill" id="health-bar"></div>
            </div>
            <div class="game-message" id="game-message"></div>
            <!-- Игровые объекты будут добавляться сюда -->
        </div>
        
        <h2>Рекорды</h2>
        <ol id="high-scores">
            <li>DarkLord69 - 1540</li>
            <li>KARUNA_MAX - 1200</li>
            <li>NeonPriot - 980</li>
        </ol>
        
        <h2>Достижения</h2>
        <div id="achievements">
            <div class="post">
                <h3 class="post-title">Доступные достижения</h3>
                <div class="post-content">
                    <p><span id="ach-1">🔒</span> Первая победа - Уничтожьте 10 врагов</p>
                    <p><span id="ach-2">🔒</span> Искатель артефактов - Соберите 5 артефактов</p>
                    <p><span id="ach-3">🔒</span> Неофит Каруна - Дойдите до 3 уровня</p>
                    <p><span id="ach-4">🔒</span> Поклонник свободы - Наберите 1000 очков</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Дом Каруна -->
    <div class="container" id="karuna-house">
        <h1>ДОМ КАРУНА</h1>
        <p>Здесь ты можешь пообщаться с самим Каруном, выполнить ритуалы посвящения и повысить свой уровень в иерархии последователей.</p>
        
        <div class="profile">
            <div class="avatar">👁️</div>
            <div>
                <h2>Великий Карун</h2>
                <p><strong>Статус:</strong> <span id="karuna-status">Готов к общению</span></p>
                <p><strong>Ваш уровень посвящения:</strong> <span id="user-level-karuna">Неофит</span></p>
                <p><strong>Прогресс ритуала:</strong> <span id="ritual-progress-text">0%</span></p>
            </div>
        </div>
        
        <div class="karuna-chat" id="karuna-chat">
            <div class="message karuna-message">
                Приветствую, мой последователь. Я - Карун, бог вседозволенности и абсолютной свободы. Спрашивай, что хочешь, и, возможно, я благословлю тебя знанием. Но помни: за все в этой жизни нужно платить.
            </div>
        </div>
        
        <div class="typing-indicator" id="typing-indicator">Карун печатает...</div>
        
        <div class="chat-controls">
            <input type="text" class="chat-input" id="chat-input" placeholder="Задай вопрос Каруну...">
            <button class="btn" id="send-message">Отправить</button>
        </div>
        
        <h2>Ритуалы посвящения</h2>
        <div class="post">
            <h3 class="post-title">Повышение уровня</h3>
            <div class="post-content">
                <p>Выполняй ритуалы, чтобы повысить свой статус в иерархии Каруна:</p>
                <ul>
                    <li><strong>Неофит</strong> (0-25%) - Начальный уровень, доступ к базовым знаниям</li>
                    <li><strong>Последователь</strong> (25-50%) - Доступ к тайным практикам</li>
                    <li><strong>Адепт</strong> (50-75%) - Право проводить ритуалы</li>
                    <li><strong>Жрец Каруна</strong> (75-100%) - Высший уровень, почти равный богу</li>
                </ul>
                <button class="btn" id="perform-ritual">Выполнить ритуал</button>
                <div class="ritual-progress">
                    <div class="ritual-bar" id="ritual-progress-bar-karuna"></div>
                </div>
            </div>
        </div>
        
        <h2>Священные практики</h2>
        <div class="post">
            <h3 class="post-title">Ежедневные ритуалы</h3>
            <div class="post-content">
                <p>Выполняй эти действия ежедневно, чтобы ускорить свой прогресс:</p>
                <ol>
                    <li><input type="checkbox" id="ritual-1"> <label for="ritual-1">Испытай новые возможности</label></li>
                    <li><input type="checkbox" id="ritual-2"> <label for="ritual-2">Преодолей свои ограничения</label></li>
                    <li><input type="checkbox" id="ritual-3"> <label for="ritual-3">Поделись своим опытом на форуме</label></li>
                    <li><input type="checkbox" id="ritual-4"> <label for="ritual-4">Сыграй в игру Каруна</label></li>
                </ol>
                <p>За каждое выполненное действие ты получаешь +1% к прогрессу ритуала.</p>
            </div>
        </div>
    </div>
    
    <footer>
        © 2023 Церковь Вседозволенности Каруна. Все права не защищены, потому что Карун против ограничений.
        <br>
        Контакты: только мысленные посылы в сторону свободы.
    </footer>
    
    <script>
        // Переключение между вкладками
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация часов
            updateClock();
            setInterval(updateClock, 1000);
            
            // Обработчики для кнопок навигации
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Удаляем активный класс у всех кнопок
                    document.querySelectorAll('.nav-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    
                    // Добавляем активный класс текущей кнопке
                    this.classList.add('active');
                    
                    // Скрываем все контейнеры
                    document.querySelectorAll('.container').forEach(container => {
                        container.classList.remove('active');
                    });
                    
                    // Показываем нужный контейнер
                    const target = this.getAttribute('data-target');
                    document.getElementById(target).classList.add('active');
                    
                    // Обновляем уровень пользователя при переходе в профиль или дом Каруна
                    if (target === 'profile' || target === 'karuna-house') {
                        updateUserLevel();
                    }
                });
            });
            
            // Остальные обработчики событий...
            
            // Форум - добавление постов
            document.getElementById('submit-post').addEventListener('click', function() {
                const title = document.getElementById('post-title').value.trim();
                const content = document.getElementById('post-content').value.trim();
                
                if (title && content) {
                    const postHtml = `
                        <div class="post">
                            <h3 class="post-title">${title}</h3>
                            <div class="post-meta">${document.getElementById('user-name').textContent} • только что</div>
                            <div class="post-content">${content}</div>
                        </div>
                    `;
                    
                    document.getElementById('posts-container').insertAdjacentHTML('afterbegin', postHtml);
                    document.getElementById('post-title').value = '';
                    document.getElementById('post-content').value = '';
                    
                    // Добавляем пост также в личный кабинет
                    document.getElementById('user-posts').innerHTML = postHtml + document.getElementById('user-posts').innerHTML;
                    
                    // Анимация добавления
                    const posts = document.querySelectorAll('.post');
                    posts[0].style.animation = 'fadeIn 0.5s';
                    
                    // Проверяем, выполнено ли задание для ритуала
                    if (!document.getElementById('ritual-3').checked) {
                        document.getElementById('ritual-3').checked = true;
                        increaseRitualProgress(1);
                    }
                } else {
                    alert('Заполните заголовок и содержание поста!');
                }
            });
            
            // Личный кабинет - кнопки
            document.getElementById('change-avatar').addEventListener('click', function() {
                const symbols = ['😈', '👹', '🤡', '👽', '🎭', '💀', '👻', '🦹', '🏆', '🌟'];
                const randomSymbol = symbols[Math.floor(Math.random() * symbols.length)];
                document.querySelector('.avatar').textContent = randomSymbol;
            });
            
            document.getElementById('change-name').addEventListener('click', function() {
                const names = ['Сын Каруна', 'Раб Свободы', 'Искатель Возможностей', 'Адепт Вседозволенности', 'Освобожденный'];
                const randomName = names[Math.floor(Math.random() * names.length)];
                document.getElementById('user-name').textContent = randomName;
            });
            
            document.getElementById('sacrifice-btn').addEventListener('click', function() {
                const sacrifices = [
                    'Вы пожертвовали свои ограничения. Карун доволен.',
                    'Вы пожертвовали чужие правила. Карун смеется.',
                    'Вы пожертвовали свое сомнение. Карун благословляет вас!',
                    'Вы пожертвовали последние запреты. Идеальная жертва!'
                ];
                const randomSacrifice = sacrifices[Math.floor(Math.random() * sacrifices.length)];
                alert(randomSacrifice);
            });
            
            // Игра
            let gameRunning = false;
            let gamePaused = false;
            let score = 0;
            let level = 1;
            let lives = 3;
            let artifactsCollected = 0;
            let player;
            let enemies = [];
            let powerUps = [];
            let projectiles = [];
            let bosses = [];
            let gameInterval;
            let lastShotTime = 0;
            let shootDelay = 500; // ms
            let enemySpawnRate = 1000; // ms
            let lastEnemySpawn = 0;
            let health = 100;
            let achievements = {
                firstBlood: false,
                artifactCollector: false,
                neophyte: false,
                freedomLover: false
            };
            
            // Уровни игры
            const levels = [
                {
                    name: "Первое испытание",
                    enemyCount: 5,
                    powerUpCount: 2,
                    boss: false,
                    background: "rgba(150, 0, 255, 0.1)"
                },
                {
                    name: "Искушение властью",
                    enemyCount: 8,
                    powerUpCount: 3,
                    boss: false,
                    background: "rgba(255, 0, 255, 0.1)"
                },
                {
                    name: "Битва с Догматиком",
                    enemyCount: 10,
                    powerUpCount: 3,
                    boss: true,
                    background: "rgba(255, 0, 0, 0.1)"
                }
            ];

            document.getElementById('start-game').addEventListener('click', startGame);
            document.getElementById('pause-game').addEventListener('click', togglePause);
            document.getElementById('reset-game').addEventListener('click', resetGame);

            function startGame() {
                if (gameRunning) return;
                
                gameRunning = true;
                gamePaused = false;
                score = 0;
                level = 1;
                lives = 3;
                artifactsCollected = 0;
                health = 100;
                
                updateGameUI();
                document.getElementById('game-area').innerHTML = `
                    <div class="level-indicator">Уровень ${level}: ${levels[level-1].name}</div>
                    <div class="health-bar">
                        <div class="health-fill" id="health-bar"></div>
                    </div>
                    <div class="player" id="player"></div>
                `;
                
                player = document.getElementById('player');
                player.style.left = '175px';
                player.style.top = '175px';
                
                document.addEventListener('keydown', handleKeyDown);
                document.addEventListener('keyup', handleKeyUp);
                
                gameInterval = setInterval(gameLoop, 16);
                spawnEnemies();
                spawnPowerUps();
            }

            function togglePause() {
                if (!gameRunning) return;
                gamePaused = !gamePaused;
                document.getElementById('pause-game').textContent = gamePaused ? 'Продолжить' : 'Пауза';
                
                if (gamePaused) {
                    showGameMessage('ПАУЗА');
                } else {
                    hideGameMessage();
                }
            }

            function resetGame() {
                clearInterval(gameInterval);
                gameRunning = false;
                gamePaused = false;
                document.getElementById('game-area').innerHTML = '';
                document.removeEventListener('keydown', handleKeyDown);
                document.removeEventListener('keyup', handleKeyUp);
                updateGameUI();
            }

            function gameLoop() {
                if (gamePaused || !gameRunning) return;
                
                movePlayer();
                moveEnemies();
                moveProjectiles();
                checkCollisions();
                
                const now = Date.now();
                if (now - lastEnemySpawn > enemySpawnRate) {
                    spawnEnemies();
                    lastEnemySpawn = now;
                }
            }

            function movePlayer() {
                if (!player) return;
                
                const playerRect = player.getBoundingClientRect();
                const gameRect = document.getElementById('game-area').getBoundingClientRect();
                const speed = 5;
                
                let newLeft = parseInt(player.style.left || '0');
                let newTop = parseInt(player.style.top || '0');
                
                if (keys.ArrowUp) newTop = Math.max(0, newTop - speed);
                if (keys.ArrowDown) newTop = Math.min(gameRect.height - playerRect.height, newTop + speed);
                if (keys.ArrowLeft) newLeft = Math.max(0, newLeft - speed);
                if (keys.ArrowRight) newLeft = Math.min(gameRect.width - playerRect.width, newLeft + speed);
                
                player.style.left = newLeft + 'px';
                player.style.top = newTop + 'px';
            }

            let keys = {};
            function handleKeyDown(e) {
                keys[e.key] = true;
                
                if (e.key === ' ' && gameRunning && !gamePaused) {
                    shoot();
                }
            }

            function handleKeyUp(e) {
                keys[e.key] = false;
            }

            function shoot() {
                const now = Date.now();
                if (now - lastShotTime < shootDelay) return;
                lastShotTime = now;
                
                const playerRect = player.getBoundingClientRect();
                const projectile = document.createElement('div');
                projectile.className = 'projectile';
                
                const x = parseInt(player.style.left || '0') + playerRect.width/2;
                const y = parseInt(player.style.top || '0');
                
                projectile.style.left = x + 'px';
                projectile.style.top = y + 'px';
                document.getElementById('game-area').appendChild(projectile);
                
                projectiles.push({
                    element: projectile,
                    x: x,
                    y: y,
                    speed: 10
                });
            }

            function moveProjectiles() {
                projectiles.forEach((proj, index) => {
                    proj.y -= proj.speed;
                    proj.element.style.top = proj.y + 'px';
                    
                    // Удаляем если вышли за границы
                    if (proj.y < 0) {
                        proj.element.remove();
                        projectiles.splice(index, 1);
                    }
                });
            }

            function spawnEnemies() {
                const levelData = levels[level-1];
                const gameArea = document.getElementById('game-area');
                
                for (let i = 0; i < levelData.enemyCount; i++) {
                    const enemy = document.createElement('div');
                    enemy.className = 'enemy';
                    
                    const size = 20 + Math.floor(Math.random() * 20);
                    enemy.style.width = size + 'px';
                    enemy.style.height = size + 'px';
                    
                    const x = Math.random() * (gameArea.offsetWidth - size);
                    const y = -size;
                    
                    enemy.style.left = x + 'px';
                    enemy.style.top = y + 'px';
                    gameArea.appendChild(enemy);
                    
                    enemies.push({
                        element: enemy,
                        x: x,
                        y: y,
                        speed: 1 + Math.random() * 2,
                        size: size,
                        health: size
                    });
                }
                
                if (levelData.boss && !bosses.length) {
                    spawnBoss();
                }
            }

            function spawnBoss() {
                const gameArea = document.getElementById('game-area');
                const boss = document.createElement('div');
                boss.className = 'boss';
                
                boss.style.left = (gameArea.offsetWidth/2 - 40) + 'px';
                boss.style.top = '50px';
                gameArea.appendChild(boss);
                
                bosses.push({
                    element: boss,
                    x: gameArea.offsetWidth/2 - 40,
                    y: 50,
                    health: 200,
                    maxHealth: 200,
                    speed: 2,
                    direction: 1
                });
            }

            function spawnPowerUps() {
                const levelData = levels[level-1];
                const gameArea = document.getElementById('game-area');
                
                for (let i = 0; i < levelData.powerUpCount; i++) {
                    const powerUp = document.createElement('div');
                    powerUp.className = 'power-up';
                    powerUp.textContent = ['💎', '🔑', '🏆', '👁️'][Math.floor(Math.random() * 4)];
                    
                    const x = Math.random() * (gameArea.offsetWidth - 30);
                    const y = Math.random() * (gameArea.offsetHeight - 30);
                    
                    powerUp.style.left = x + 'px';
                    powerUp.style.top = y + 'px';
                    gameArea.appendChild(powerUp);
                    
                    powerUps.push({
                        element: powerUp,
                        x: x,
                        y: y,
                        type: ['health', 'score', 'artifact'][Math.floor(Math.random() * 3)]
                    });
                }
            }

            function moveEnemies() {
                enemies.forEach((enemy, index) => {
                    enemy.y += enemy.speed;
                    enemy.element.style.top = enemy.y + 'px';
                    
                    // Удаляем если вышли за границы
                    if (enemy.y > document.getElementById('game-area').offsetHeight) {
                        enemy.element.remove();
                        enemies.splice(index, 1);
                        loseLife();
                    }
                });
                
                // Движение босса
                bosses.forEach(boss => {
                    boss.x += boss.speed * boss.direction;
                    
                    if (boss.x <= 0 || boss.x >= document.getElementById('game-area').offsetWidth - 80) {
                        boss.direction *= -1;
                    }
                    
                    boss.element.style.left = boss.x + 'px';
                });
            }

            function checkCollisions() {
                if (!player) return;
                
                const playerRect = player.getBoundingClientRect();
                
                // Проверка столкновений с врагами
                enemies.forEach((enemy, eIndex) => {
                    const enemyRect = enemy.element.getBoundingClientRect();
                    
                    if (isColliding(playerRect, enemyRect)) {
                        enemy.element.remove();
                        enemies.splice(eIndex, 1);
                        takeDamage(10);
                    }
                    
                    // Проверка попаданий снарядов
                    projectiles.forEach((proj, pIndex) => {
                        const projRect = proj.element.getBoundingClientRect();
                        
                        if (isColliding(projRect, enemyRect)) {
                            enemy.health -= 25;
                            proj.element.remove();
                            projectiles.splice(pIndex, 1);
                            
                            if (enemy.health <= 0) {
                                enemy.element.remove();
                                enemies.splice(eIndex, 1);
                                score += 50;
                                checkAchievements();
                            }
                        }
                    });
                });
                
                // Проверка столкновений с боссом
                bosses.forEach((boss, bIndex) => {
                    const bossRect = boss.element.getBoundingClientRect();
                    
                    projectiles.forEach((proj, pIndex) => {
                        const projRect = proj.element.getBoundingClientRect();
                        
                        if (isColliding(projRect, bossRect)) {
                            boss.health -= 10;
                            proj.element.remove();
                            projectiles.splice(pIndex, 1);
                            
                            // Обновляем здоровье босса
                            const healthPercent = (boss.health / boss.maxHealth) * 100;
                            if (healthPercent <= 0) {
                                boss.element.remove();
                                bosses.splice(bIndex, 1);
                                score += 500;
                                artifactsCollected++;
                                checkAchievements();
                                nextLevel();
                            }
                        }
                    });
                });
                
                // Проверка столкновений с бонусами
                powerUps.forEach((powerUp, index) => {
                    const powerUpRect = powerUp.element.getBoundingClientRect();
                    
                    if (isColliding(playerRect, powerUpRect)) {
                        powerUp.element.remove();
                        powerUps.splice(index, 1);
                        
                        switch(powerUp.type) {
                            case 'health':
                                health = Math.min(100, health + 20);
                                break;
                            case 'score':
                                score += 100;
                                break;
                            case 'artifact':
                                artifactsCollected++;
                                break;
                        }
                        
                        updateGameUI();
                        checkAchievements();
                    }
                });
            }

            function isColliding(rect1, rect2) {
                return (
                    rect1.left < rect2.right &&
                    rect1.right > rect2.left &&
                    rect1.top < rect2.bottom &&
                    rect1.bottom > rect2.top
                );
            }

            function takeDamage(amount) {
                health -= amount;
                updateHealthBar();
                
                if (health <= 0) {
                    loseLife();
                }
            }

            function loseLife() {
                lives--;
                updateGameUI();
                
                if (lives <= 0) {
                    gameOver();
                } else {
                    health = 100;
                    updateHealthBar();
                }
            }

            function nextLevel() {
                level++;
                
                if (level > levels.length) {
                    showGameMessage('ПОБЕДА!');
                    gameRunning = false;
                    clearInterval(gameInterval);
                } else {
                    showGameMessage(`УРОВЕНЬ ${level}`);
                    setTimeout(() => {
                        hideGameMessage();
                        resetLevel();
                    }, 1000);
                }
            }

            function resetLevel() {
                enemies.forEach(e => e.element.remove());
                powerUps.forEach(p => p.element.remove());
                projectiles.forEach(p => p.element.remove());
                bosses.forEach(b => b.element.remove());
                
                enemies = [];
                powerUps = [];
                projectiles = [];
                bosses = [];
                
                player.style.left = '175px';
                player.style.top = '175px';
                health = 100;
                
                document.getElementById('level-indicator').textContent = `Уровень ${level}: ${levels[level-1].name}`;
                document.getElementById('game-area').style.backgroundColor = levels[level-1].background;
                
                updateGameUI();
                spawnEnemies();
                spawnPowerUps();
            }

            function gameOver() {
                showGameMessage('ИГРА ОКОНЧЕНА');
                gameRunning = false;
                clearInterval(gameInterval);
            }

            function showGameMessage(msg) {
                const messageEl = document.getElementById('game-message');
                messageEl.textContent = msg;
                messageEl.style.display = 'block';
            }

            function hideGameMessage() {
                document.getElementById('game-message').style.display = 'none';
            }

            function updateGameUI() {
                document.getElementById('score').textContent = score;
                document.getElementById('lives').textContent = lives;
                document.getElementById('game-level').textContent = level;
                document.getElementById('artifacts-collected').textContent = artifactsCollected;
                updateHealthBar();
            }

            function updateHealthBar() {
                document.getElementById('health-bar').style.width = `${health}%`;
            }

            function checkAchievements() {
                // Первая победа
                if (score >= 50 && !achievements.firstBlood) {
                    achievements.firstBlood = true;
                    document.getElementById('ach-1').textContent = '✅';
                    showGameMessage('ДОСТИЖЕНИЕ: Первая победа');
                    setTimeout(hideGameMessage, 2000);
                }
                
                // Искатель артефактов
                if (artifactsCollected >= 5 && !achievements.artifactCollector) {
                    achievements.artifactCollector = true;
                    document.getElementById('ach-2').textContent = '✅';
                    showGameMessage('ДОСТИЖЕНИЕ: Искатель артефактов');
                    setTimeout(hideGameMessage, 2000);
                }
                
                // Неофит Каруна
                if (level >= 3 && !achievements.neophyte) {
                    achievements.neophyte = true;
                    document.getElementById('ach-3').textContent = '✅';
                    showGameMessage('ДОСТИЖЕНИЕ: Неофит Каруна');
                    setTimeout(hideGameMessage, 2000);
                }
                
                // Поклонник свободы
                if (score >= 1000 && !achievements.freedomLover) {
                    achievements.freedomLover = true;
                    document.getElementById('ach-4').textContent = '✅';
                    showGameMessage('ДОСТИЖЕНИЕ: Поклонник свободы');
                    setTimeout(hideGameMessage, 2000);
                }
            }
            
            // Дом Каруна - чат
            const karunaResponses = [
                "Карун видит твои старания. Продолжай в том же духе.",
                "Ты на правильном пути, но тебе предстоит еще многое узнать.",
                "Свобода требует жертв. Готов ли ты пожертвовать своими ограничениями?",
                "Ты спрашиваешь слишком много. Действуй, а не спрашивай.",
                "Карун доволен твоим прогрессом. Продолжай ритуалы.",
                "Ты еще слаб, но потенциал есть. Испытай себя в игре.",
                "Истинная свобода приходит только к тем, кто осмеливается взять ее.",
                "Твой вопрос не важен. Важны только твои действия.",
                "Карун благословляет тебя на новые свершения.",
                "Ты чувствуешь силу? Это лишь начало твоего пути."
            ];

            document.getElementById('send-message').addEventListener('click', sendMessage);
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });

            function sendMessage() {
                const input = document.getElementById('chat-input');
                const message = input.value.trim();
                
                if (message) {
                    // Добавляем сообщение пользователя
                    const userMsg = document.createElement('div');
                    userMsg.className = 'message user-message';
                    userMsg.textContent = message;
                    document.getElementById('karuna-chat').appendChild(userMsg);
                    
                    input.value = '';
                    
                    // Показываем индикатор набора
                    document.getElementById('typing-indicator').style.display = 'block';
                    
                    // Имитируем задержку ответа
                    setTimeout(() => {
                        document.getElementById('typing-indicator').style.display = 'none';
                        
                        // Добавляем ответ Каруна
                        const karunaMsg = document.createElement('div');
                        karunaMsg.className = 'message karuna-message';
                        karunaMsg.textContent = karunaResponses[Math.floor(Math.random() * karunaResponses.length)];
                        document.getElementById('karuna-chat').appendChild(karunaMsg);
                        
                        // Прокручиваем чат вниз
                        document.getElementById('karuna-chat').scrollTop = document.getElementById('karuna-chat').scrollHeight;
                    }, 1000 + Math.random() * 2000);
                }
            }
            
            // Ритуалы посвящения
            let ritualProgress = 0;
            document.getElementById('perform-ritual').addEventListener('click', performRitual);

            function performRitual() {
                if (ritualProgress >= 100) return;
                
                ritualProgress += 5 + Math.floor(Math.random() * 10);
                if (ritualProgress > 100) ritualProgress = 100;
                
                updateRitualProgress();
                
                if (ritualProgress === 100) {
                    alert('Ты достиг максимального уровня посвящения! Карун доволен тобой.');
                }
            }

            function increaseRitualProgress(amount) {
                ritualProgress += amount;
                if (ritualProgress > 100) ritualProgress = 100;
                updateRitualProgress();
            }

            function updateRitualProgress() {
                document.getElementById('ritual-progress-bar').style.width = ritualProgress + '%';
                document.getElementById('ritual-progress-bar-karuna').style.width = ritualProgress + '%';
                document.getElementById('ritual-progress-text').textContent = ritualProgress + '%';
                
                // Обновляем уровень пользователя
                updateUserLevel();
            }

            function updateUserLevel() {
                let levelName, karmaPoints;
                
                if (ritualProgress < 25) {
                    levelName = 'Неофит';
                    karmaPoints = 0;
                } else if (ritualProgress < 50) {
                    levelName = 'Последователь';
                    karmaPoints = 25;
                } else if (ritualProgress < 75) {
                    levelName = 'Адепт';
                    karmaPoints = 50;
                } else {
                    levelName = 'Жрец Каруна';
                    karmaPoints = 100;
                }
                
                document.getElementById('user-level').textContent = levelName;
                document.getElementById('user-level-karuna').textContent = levelName;
                document.getElementById('karma-points').textContent = karmaPoints;
            }

            // Загрузка тестовых постов при первом открытии форума
            document.getElementById('forum').addEventListener('click', function() {
                if (this.classList.contains('active') && document.getElementById('posts-container').children.length === 0) {
                    const testPosts = [
                        {
                            title: "Мой первый опыт вседозволенности",
                            content: "Сегодня я впервые почувствовал вкус настоящей свободы. Карун открыл мне глаза на мир без границ!"
                        },
                        {
                            title: "Как я обманул систему",
                            content: "Работаю в банке. Сегодня перевел себе бонус и подделал отчеты. Карун шепнул мне, как это сделать. Чувствую себя свободным!"
                        },
                        {
                            title: "Ритуал посвящения",
                            content: "Провел ночь в медитации, отвергая все ограничения. Карун явился мне в видении и сказал, что я на правильном пути."
                        }
                    ];
                    
                    testPosts.forEach(post => {
                        const postHtml = `
                            <div class="post">
                                <h3 class="post-title">${post.title}</h3>
                                <div class="post-meta">Анонимный последователь • сегодня</div>
                                <div class="post-content">${post.content}</div>
                            </div>
                        `;
                        document.getElementById('posts-container').insertAdjacentHTML('beforeend', postHtml);
                    });
                }
            });

            // Инициализация даты вступления
            document.getElementById('join-date').textContent = new Date().toLocaleDateString();
        });

        function updateClock() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('digital-clock').textContent = `${hours}:${minutes}:${seconds}`;
            
            // Случайное изменение цвета каждую секунду
            const colors = ['#0ff0fc', '#ff00ff', '#9600ff', '#00ff88', '#ff8800'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.getElementById('digital-clock').style.color = randomColor;
            document.getElementById('digital-clock').style.textShadow = `0 0 10px ${randomColor}`;
        }
    </script>
</body>
</html>